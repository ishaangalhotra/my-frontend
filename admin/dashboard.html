<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QuickLocal Admin Dashboard</title>
    <meta name="description" content="QuickLocal administration panel for managing deliveries, orders, and sellers">
    
    <!-- Preload critical resources -->
    <link rel="preload" href="https://cdn.tailwindcss.com" as="script">
    <link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" as="style">
    <link rel="preload" href="https://cdn.jsdelivr.net/npm/chart.js" as="script">
    
    <!-- Favicon -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>‚ö°</text></svg>">
    
    <!-- CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <style>
        /* Performance optimized animations */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        @keyframes slideIn {
            from { opacity: 0; transform: translateX(-20px); }
            to { opacity: 1; transform: translateX(0); }
        }
        
        .animate-fade-in {
            animation: fadeIn 0.4s ease-out forwards;
        }
        
        .animate-slide-in {
            animation: slideIn 0.5s ease-out forwards;
        }
        
        /* Optimized hover effects */
        .stat-card {
            will-change: transform, box-shadow;
            transition: 
                transform 0.2s ease-out,
                box-shadow 0.2s ease-out;
        }
        
        .stat-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
        }
        
        /* Enhanced gradient cards */
        .revenue-card {
            background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
        }

        .orders-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }

        .customers-card {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
        }

        .products-card {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
        }

        /* Business Intelligence Gradients */
        .bi-gradient-1 {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }

        .bi-gradient-2 {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
        }

        .bi-gradient-3 {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
        }

        .bi-gradient-4 {
            background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);
        }
        
        /* Sidebar transitions */
        .sidebar-link {
            transition: 
                background-color 0.15s ease,
                border-color 0.15s ease,
                transform 0.15s ease;
        }
        
        .sidebar-link:hover {
            transform: translateX(2px);
        }
        
        .sidebar-link.active {
            background-color: rgba(59, 130, 246, 0.1);
            border-left: 4px solid #3b82f6;
            color: #3b82f6 !important;
        }
        
        /* Enhanced performance indicators */
        .performance-indicator {
            display: inline-block;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-right: 8px;
            transition: all 0.2s ease;
        }

        .indicator-excellent { 
            background-color: #10b981; 
            box-shadow: 0 0 0 3px rgba(16, 185, 129, 0.2);
        }
        .indicator-good { 
            background-color: #3b82f6; 
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.2);
        }
        .indicator-average { 
            background-color: #f59e0b; 
            box-shadow: 0 0 0 3px rgba(245, 158, 11, 0.2);
        }
        .indicator-poor { 
            background-color: #ef4444; 
            box-shadow: 0 0 0 3px rgba(239, 68, 68, 0.2);
        }

        /* Chart containers */
        .chart-container {
            position: relative;
            height: 300px;
            margin: 20px 0;
        }

        /* Section visibility */
        .section-hidden {
            display: none;
        }

        /* Notification styles */
        .notification-badge {
            position: absolute;
            top: -8px;
            right: -8px;
            background: #ef4444;
            color: white;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            font-size: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            animation: pulse 2s infinite;
        }

        /* Metric cards */
        .metric-card {
            transition: all 0.3s ease;
            border-left: 4px solid transparent;
        }

        .metric-card:hover {
            transform: translateY(-2px);
            border-left-color: #3b82f6;
            box-shadow: 0 10px 25px rgba(0,0,0,0.15);
        }

        /* Progress rings */
        .progress-ring {
            transform: rotate(-90deg);
        }

        .progress-ring-circle {
            stroke-dasharray: 251.2;
            stroke-dashoffset: 251.2;
            transition: stroke-dashoffset 0.5s ease-in-out;
        }

        /* API Configuration Styles */
        .api-config-section {
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            border: 2px dashed #667eea;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 30px;
            text-align: center;
        }

        .api-input {
            width: 100%;
            max-width: 500px;
            padding: 12px;
            border: 2px solid #dee2e6;
            border-radius: 8px;
            font-size: 1rem;
            margin: 10px auto;
            display: block;
            transition: all 0.3s ease;
        }

        .api-input:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
            transform: scale(1.02);
        }

        /* Form styles */
        .form-section {
            margin-top: 40px;
            padding: 30px;
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            border-radius: 15px;
            box-shadow: inset 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group input,
        .form-group textarea {
            width: 100%;
            padding: 15px;
            border: 2px solid #dee2e6;
            border-radius: 10px;
            font-size: 1rem;
            transition: all 0.3s ease;
            background: white;
        }

        .form-group input:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
            transform: translateY(-1px);
        }

        /* Button styles */
        .btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(102, 126, 234, 0.3);
        }

        .btn:active {
            transform: translateY(0);
        }

        /* Loading states */
        .loading {
            opacity: 0.6;
            pointer-events: none;
        }

        .spinner {
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        /* Status colors */
        .status-pending { color: #f59e0b; }
        .status-processing { color: #3b82f6; }
        .status-shipped { color: #8b5cf6; }
        .status-delivered { color: #10b981; }
        .status-cancelled { color: #ef4444; }

        /* Pulse animation */
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        .pulse-animation {
            animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }

        /* Fix for small screens */
        @media (max-width: 768px) {
            .stat-card {
                padding: 1rem;
            }
            .chart-container {
                height: 250px;
            }
            .sidebar-link {
                padding: 0.75rem 1rem;
            }
        }
    </style>
</head>
<body class="bg-gray-50 font-sans antialiased">
    <!-- Skip to content link for accessibility -->
    <a href="#main-content" class="sr-only focus:not-sr-only focus:fixed focus:top-4 focus:left-4 focus:bg-blue-600 focus:text-white focus:px-4 focus:py-2 focus:rounded focus:z-50">
        Skip to content
    </a>

    <!-- Sidebar -->
    <div class="fixed inset-y-0 left-0 z-50 w-64 bg-white shadow-xl flex flex-col">
        <!-- Logo -->
        <div class="flex items-center justify-center h-16 revenue-card text-white">
            <i class="fas fa-bolt text-2xl mr-2" aria-hidden="true"></i>
            <span class="text-xl font-bold">QuickLocal Admin</span>
        </div>
        
        <!-- Navigation -->
        <nav class="mt-8 flex-1 overflow-y-auto">
            <div class="px-4 space-y-1">
                <a href="#" class="sidebar-link active flex items-center px-4 py-3 text-gray-700 rounded-lg" data-section="dashboard" aria-current="page">
                    <i class="fas fa-chart-line mr-3" aria-hidden="true"></i>
                    <span>Dashboard</span>
                </a>
                
                <a href="#" class="sidebar-link flex items-center px-4 py-3 text-gray-700 rounded-lg" data-section="business-intelligence">
                    <i class="fas fa-brain mr-3" aria-hidden="true"></i>
                    <span>Business Intelligence</span>
                    <span class="ml-auto bg-gradient-to-r from-blue-500 to-purple-500 text-white text-xs px-2 py-1 rounded-full">AI</span>
                </a>
                
                <a href="#" class="sidebar-link flex items-center px-4 py-3 text-gray-700 rounded-lg" data-section="analytics">
                    <i class="fas fa-chart-bar mr-3" aria-hidden="true"></i>
                    <span>Analytics</span>
                </a>
                
                <a href="#" class="sidebar-link flex items-center px-4 py-3 text-gray-700 rounded-lg" data-section="orders">
                    <i class="fas fa-box mr-3" aria-hidden="true"></i>
                    <span>Orders</span>
                    <span class="ml-auto bg-red-500 text-white text-xs px-2 py-1 rounded-full">5</span>
                </a>
                
                <a href="#" class="sidebar-link flex items-center px-4 py-3 text-gray-700 rounded-lg" data-section="products">
                    <i class="fas fa-shopping-bag mr-3" aria-hidden="true"></i>
                    <span>Products</span>
                </a>
                
                <a href="#" class="sidebar-link flex items-center px-4 py-3 text-gray-700 rounded-lg" data-section="sellers">
                    <i class="fas fa-store mr-3" aria-hidden="true"></i>
                    <span>Sellers</span>
                </a>
                
                <a href="#" class="sidebar-link flex items-center px-4 py-3 text-gray-700 rounded-lg" data-section="customers">
                    <i class="fas fa-users mr-3" aria-hidden="true"></i>
                    <span>Customers</span>
                </a>
                
                <a href="#" class="sidebar-link flex items-center px-4 py-3 text-gray-700 rounded-lg" data-section="delivery">
                    <i class="fas fa-truck-fast mr-3" aria-hidden="true"></i>
                    <span>Delivery</span>
                    <span class="ml-auto bg-green-500 text-white text-xs px-2 py-1 rounded-full pulse-animation">Live</span>
                </a>
                
                <a href="#" class="sidebar-link flex items-center px-4 py-3 text-gray-700 rounded-lg" data-section="reports">
                    <i class="fas fa-file-earmark-text mr-3" aria-hidden="true"></i>
                    <span>Reports</span>
                </a>
                
                <a href="#" class="sidebar-link flex items-center px-4 py-3 text-gray-700 rounded-lg" data-section="settings">
                    <i class="fas fa-cog mr-3" aria-hidden="true"></i>
                    <span>Settings</span>
                </a>
            </div>
        </nav>
        
        <!-- Bottom Section -->
        <div class="p-4 border-t border-gray-200">
            <div class="bg-gradient-to-r from-blue-50 to-purple-50 rounded-lg p-4">
                <div class="flex items-center">
                    <div class="w-10 h-10 bg-blue-600 rounded-full flex items-center justify-center text-white">
                        <i class="fas fa-user" aria-hidden="true"></i>
                    </div>
                    <div class="ml-3 flex-1">
                        <p class="text-sm font-medium text-gray-800">Admin User</p>
                        <p class="text-xs text-gray-500">admin@quicklocal.com</p>
                    </div>
                </div>
                <button class="mt-3 w-full bg-white text-gray-700 px-3 py-2 rounded-lg text-sm hover:bg-gray-50 transition-colors flex items-center justify-center" aria-label="Logout">
                    <i class="fas fa-sign-out-alt mr-2" aria-hidden="true"></i>
                    Logout
                </button>
            </div>
        </div>
    </div>
    
    <!-- Main Content -->
    <div class="ml-64 flex flex-col min-h-screen">
        <!-- Top Bar -->
        <header class="bg-white shadow-sm border-b border-gray-200 sticky top-0 z-40">
            <div class="flex flex-col sm:flex-row items-start sm:items-center justify-between px-6 py-4">
                <div class="mb-2 sm:mb-0">
                    <h1 class="text-xl sm:text-2xl font-bold text-gray-800" id="page-title">Dashboard Overview</h1>
                    <p class="text-sm sm:text-base text-gray-600" id="page-subtitle">Welcome back! Here's what's happening today.</p>
                </div>
                
                <div class="flex items-center space-x-3 sm:space-x-4 w-full sm:w-auto">
                    <!-- Search -->
                    <div class="relative flex-1 sm:flex-none sm:w-64">
                        <label for="search" class="sr-only">Search</label>
                        <input 
                            type="text" 
                            id="search"
                            placeholder="Search..." 
                            class="pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 w-full"
                            aria-label="Search dashboard"
                        >
                        <i class="fas fa-search absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400" aria-hidden="true"></i>
                    </div>
                    
                    <!-- Notifications -->
                    <button class="relative p-2 text-gray-600 hover:text-gray-800 transition-colors" aria-label="Notifications" onclick="showNotifications()">
                        <i class="fas fa-bell text-xl" aria-hidden="true"></i>
                        <span class="notification-badge">3</span>
                    </button>
                    
                    <!-- Profile -->
                    <div class="flex items-center space-x-2">
                        <div class="w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center text-white text-sm font-medium" aria-hidden="true">
                            A
                        </div>
                        <span class="text-gray-700 font-medium hidden sm:inline">Admin</span>
                    </div>
                </div>
            </div>
        </header>
        
        <!-- Main Content Area -->
        <main id="main-content" class="flex-1 p-4 sm:p-6">
            <!-- Dashboard Section -->
            <div id="dashboard-section" class="content-section">
                <!-- Stats Cards -->
                <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6 mb-6 sm:mb-8">
                    <!-- Total Revenue -->
                    <div class="stat-card bg-white rounded-xl shadow-sm hover:shadow-md p-4 sm:p-6 animate-fade-in revenue-card text-white">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-white opacity-90 text-xs sm:text-sm mb-1">Total Revenue</p>
                                <p class="text-2xl sm:text-3xl font-bold" id="totalRevenue">‚Çπ2,45,690</p>
                                <div class="flex items-center mt-1 sm:mt-2">
                                    <i class="fas fa-arrow-up text-white text-xs sm:text-sm mr-1"></i>
                                    <span class="text-white text-xs sm:text-sm">+22.1%</span>
                                    <span class="text-white opacity-75 text-xs sm:text-sm ml-1">vs last month</span>
                                </div>
                            </div>
                            <div class="bg-white bg-opacity-20 p-2 sm:p-3 rounded-full">
                                <i class="fas fa-rupee-sign text-white text-lg sm:text-xl"></i>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Total Orders -->
                    <div class="stat-card bg-white rounded-xl shadow-sm hover:shadow-md p-4 sm:p-6 animate-fade-in orders-card text-white" style="animation-delay: 0.1s">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-white opacity-90 text-xs sm:text-sm mb-1">Total Orders</p>
                                <p class="text-2xl sm:text-3xl font-bold" id="totalOrders">8,294</p>
                                <div class="flex items-center mt-1 sm:mt-2">
                                    <i class="fas fa-arrow-up text-white text-xs sm:text-sm mr-1"></i>
                                    <span class="text-white text-xs sm:text-sm">+8.2%</span>
                                    <span class="text-white opacity-75 text-xs sm:text-sm ml-1">vs last month</span>
                                </div>
                            </div>
                            <div class="bg-white bg-opacity-20 p-2 sm:p-3 rounded-full">
                                <i class="fas fa-box text-white text-lg sm:text-xl"></i>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Total Customers -->
                    <div class="stat-card bg-white rounded-xl shadow-sm hover:shadow-md p-4 sm:p-6 animate-fade-in customers-card text-white" style="animation-delay: 0.2s">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-white opacity-90 text-xs sm:text-sm mb-1">Active Customers</p>
                                <p class="text-2xl sm:text-3xl font-bold" id="totalCustomers">12,543</p>
                                <div class="flex items-center mt-1 sm:mt-2">
                                    <i class="fas fa-arrow-up text-white text-xs sm:text-sm mr-1"></i>
                                    <span class="text-white text-xs sm:text-sm">+12.5%</span>
                                    <span class="text-white opacity-75 text-xs sm:text-sm ml-1">vs last month</span>
                                </div>
                            </div>
                            <div class="bg-white bg-opacity-20 p-2 sm:p-3 rounded-full">
                                <i class="fas fa-users text-white text-lg sm:text-xl"></i>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Total Products -->
                    <div class="stat-card bg-white rounded-xl shadow-sm hover:shadow-md p-4 sm:p-6 animate-fade-in products-card text-white" style="animation-delay: 0.3s">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-white opacity-90 text-xs sm:text-sm mb-1">Total Products</p>
                                <p class="text-2xl sm:text-3xl font-bold" id="totalProducts">45,678</p>
                                <div class="flex items-center mt-1 sm:mt-2">
                                    <i class="fas fa-arrow-up text-white text-xs sm:text-sm mr-1"></i>
                                    <span class="text-white text-xs sm:text-sm">+15.3%</span>
                                    <span class="text-white opacity-75 text-xs sm:text-sm ml-1">vs last month</span>
                                </div>
                            </div>
                            <div class="bg-white bg-opacity-20 p-2 sm:p-3 rounded-full">
                                <i class="fas fa-shopping-bag text-white text-lg sm:text-xl"></i>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Charts Row -->
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6 mb-6 sm:mb-8">
                    <!-- Revenue Chart -->
                    <div class="bg-white rounded-xl shadow-sm hover:shadow-md p-4 sm:p-6 animate-slide-in">
                        <div class="flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 gap-2">
                            <h3 class="text-lg font-semibold text-gray-800">Revenue Trends</h3>
                            <select class="border border-gray-300 rounded-lg px-3 py-1 text-xs sm:text-sm focus:ring-2 focus:ring-blue-500 bg-white" onchange="updateRevenueChart(this.value)">
                                <option value="7">Last 7 days</option>
                                <option value="30" selected>Last 30 days</option>
                                <option value="90">Last 3 months</option>
                            </select>
                        </div>
                        <div class="chart-container">
                            <canvas id="revenueChart"></canvas>
                        </div>
                    </div>
                    
                    <!-- Category Distribution Chart -->
                    <div class="bg-white rounded-xl shadow-sm hover:shadow-md p-4 sm:p-6 animate-slide-in" style="animation-delay: 0.2s">
                        <h3 class="text-lg font-semibold text-gray-800 mb-4 sm:mb-6">Revenue by Category</h3>
                        <div class="chart-container">
                            <canvas id="categoryChart"></canvas>
                        </div>
                    </div>
                </div>
                
                <!-- Real-time Activity -->
                <div class="grid grid-cols-1 lg:grid-cols-3 gap-4 sm:gap-6 mb-6 sm:mb-8">
                    <!-- Active Orders -->
                    <div class="bg-white rounded-xl shadow-sm hover:shadow-md p-4 sm:p-6 animate-fade-in">
                        <div class="flex items-center justify-between mb-3 sm:mb-4">
                            <h3 class="text-lg font-semibold text-gray-800">Live Orders</h3>
                            <button class="text-blue-600 hover:text-blue-700 text-xs sm:text-sm font-medium transition-colors" onclick="refreshLiveOrders()">
                                <i class="fas fa-sync-alt mr-1"></i> Refresh
                            </button>
                        </div>
                        <div id="liveOrdersList" class="space-y-3">
                            <!-- Live orders will be populated here -->
                        </div>
                    </div>
                    
                    <!-- Top Sellers -->
                    <div class="bg-white rounded-xl shadow-sm hover:shadow-md p-4 sm:p-6 animate-fade-in" style="animation-delay: 0.1s">
                        <h3 class="text-lg font-semibold text-gray-800 mb-3 sm:mb-4">Top Sellers Today</h3>
                        <div id="topSellersList" class="space-y-3">
                            <!-- Top sellers will be populated here -->
                        </div>
                    </div>
                    
                    <!-- System Health -->
                    <div class="bg-white rounded-xl shadow-sm hover:shadow-md p-4 sm:p-6 animate-fade-in" style="animation-delay: 0.2s">
                        <h3 class="text-lg font-semibold text-gray-800 mb-3 sm:mb-4">System Health</h3>
                        <div class="space-y-3">
                            <div class="flex items-center justify-between">
                                <span class="text-gray-600 text-sm sm:text-base">API Response</span>
                                <div class="flex items-center">
                                    <div class="w-2 h-2 bg-green-500 rounded-full mr-2"></div>
                                    <span class="font-semibold text-green-600 text-sm sm:text-base">Normal</span>
                                </div>
                            </div>
                            <div class="flex items-center justify-between">
                                <span class="text-gray-600 text-sm sm:text-base">Database</span>
                                <div class="flex items-center">
                                    <div class="w-2 h-2 bg-green-500 rounded-full mr-2"></div>
                                    <span class="font-semibold text-green-600 text-sm sm:text-base">Healthy</span>
                                </div>
                            </div>
                            <div class="flex items-center justify-between">
                                <span class="text-gray-600 text-sm sm:text-base">Payment Gateway</span>
                                <div class="flex items-center">
                                    <div class="w-2 h-2 bg-yellow-500 rounded-full mr-2"></div>
                                    <span class="font-semibold text-yellow-600 text-sm sm:text-base">Slow</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Products Section -->
            <div id="products-section" class="content-section section-hidden">
                <div class="flex justify-between items-center mb-6">
                    <div>
                        <h2 class="text-2xl font-bold text-gray-800">Product Management</h2>
                        <p class="text-gray-600">Manage your product catalog and inventory</p>
                    </div>
                    <button class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors" onclick="showAddProductForm()">
                        <i class="fas fa-plus mr-2"></i>Add Product
                    </button>
                </div>

                <!-- API Configuration Section -->
                <div class="api-config-section">
                    <h2>üîß API Configuration</h2>
                    <p style="color: #6c757d; margin-bottom: 20px;">Configure your backend API endpoint to enable real product operations</p>
                    <input type="text" id="apiBaseUrl" class="api-input" placeholder="Enter your API base URL" value="https://quicklocal-backend.onrender.com">
                    <button class="btn" onclick="testAPIConnection()" style="margin-top: 10px;">
                        <i class="fas fa-plug"></i> Test Connection
                    </button>
                    <div id="apiStatus" class="mt-3"></div>
                </div>

                <!-- Real Product Form Section -->
                <div class="form-section" id="productFormSection">
                    <h3>üìù Add a Real Product</h3>
                    <form id="realProductForm" onsubmit="handleProductSubmit(event)">
                        <div class="form-group">
                            <label for="prodName" class="block text-sm font-medium text-gray-700 mb-2">Product Name *</label>
                            <input type="text" placeholder="Enter product name" id="prodName" required>
                        </div>
                        <div class="form-group">
                            <label for="prodPrice" class="block text-sm font-medium text-gray-700 mb-2">Price (‚Çπ) *</label>
                            <input type="number" placeholder="Enter price" id="prodPrice" required min="0" step="0.01">
                        </div>
                        <div class="form-group">
                            <label for="prodImage" class="block text-sm font-medium text-gray-700 mb-2">Image URL</label>
                            <input type="url" placeholder="Enter image URL (optional)" id="prodImage">
                        </div>
                        <div class="form-group">
                            <label for="prodDesc" class="block text-sm font-medium text-gray-700 mb-2">Description</label>
                            <textarea placeholder="Enter product description" id="prodDesc" rows="4"></textarea>
                        </div>
                        <div class="form-group">
                            <label for="prodCat" class="block text-sm font-medium text-gray-700 mb-2">Category</label>
                            <input type="text" placeholder="Enter category name" id="prodCat">
                        </div>
                        <div class="form-group">
                            <label for="prodDiscount" class="block text-sm font-medium text-gray-700 mb-2">Discount (%)</label>
                            <input type="number" placeholder="Enter discount percentage" id="prodDiscount" min="0" max="100" step="0.01" value="0">
                        </div>
                        <div class="form-submit">
                            <button class="btn" type="submit" id="submitProductBtn">
                                <i class="fas fa-plus"></i> Add Product to Database
                            </button>
                            <button type="button" class="btn" onclick="clearProductForm()" style="background: linear-gradient(135deg, #6c757d 0%, #495057 100%); margin-left: 10px;">
                                <i class="fas fa-times"></i> Clear Form
                            </button>
                        </div>
                    </form>
                </div>

                <!-- Products Grid -->
                <div class="mt-8">
                    <div class="flex justify-between items-center mb-6">
                        <h3 class="text-xl font-semibold text-gray-800">Products Catalog</h3>
                        <div class="flex items-center space-x-4">
                            <span class="text-sm text-gray-600">Total: <span id="productCount">0</span> products</span>
                            <button class="text-blue-600 hover:text-blue-700 text-sm font-medium" onclick="refreshProducts()">
                                <i class="fas fa-sync-alt mr-1"></i> Refresh
                            </button>
                        </div>
                    </div>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">
                        <div id="productsGrid">
                            <!-- Products will be populated here -->
                            <div class="col-span-full text-center text-gray-500 py-8">
                                <i class="fas fa-box-open text-4xl mb-4"></i>
                                <p>No products available. Add your first product!</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- JavaScript -->
    <script>
        // Global variables and state
        let currentSection = 'dashboard';
        let API_BASE = 'https://quicklocal-backend.onrender.com';
        let isAPIConnected = false;
        let dashboardData = {
            revenue: 245690,
            orders: 8294,
            customers: 12543,
            products: 45678,
            sellers: [],
            ordersList: [],
            productsList: [],
            customersList: []
        };
        let charts = {};

        // Initialize dashboard
        document.addEventListener('DOMContentLoaded', function() {
            console.log('üöÄ QuickLocal Admin Dashboard initializing...');
            
            initializeDashboard();
            setupEventListeners();
            generateMockData();
            initializeCharts();
            updateDashboardStats();
            
            console.log('‚úÖ Dashboard initialization complete');
        });

        // Initialize dashboard components
        function initializeDashboard() {
            showSection('dashboard');
            startRealTimeUpdates();
        }

        // Setup event listeners
        function setupEventListeners() {
            // Sidebar navigation
            document.querySelectorAll('.sidebar-link').forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    const section = link.dataset.section;
                    showSection(section);
                    
                    // Update active state
                    document.querySelectorAll('.sidebar-link').forEach(l => l.classList.remove('active'));
                    link.classList.add('active');
                });
            });

            // Enhanced search functionality
            const searchInput = document.getElementById('search');
            if (searchInput) {
                searchInput.addEventListener('input', debounce(handleSearch, 300));
            }
        }

        // Show specific section
        function showSection(sectionName) {
            // Hide all sections
            document.querySelectorAll('.content-section').forEach(section => {
                section.classList.add('section-hidden');
            });

            // Show selected section
            const targetSection = document.getElementById(`${sectionName}-section`);
            if (targetSection) {
                targetSection.classList.remove('section-hidden');
            }

            // Update page titles
            const titles = {
                dashboard: { title: 'Dashboard Overview', subtitle: "Welcome back! Here's what's happening today." },
                products: { title: 'Product Management', subtitle: 'Manage your product catalog and inventory' },
                orders: { title: 'Order Management', subtitle: 'Track and manage all customer orders' },
                sellers: { title: 'Seller Management', subtitle: 'Manage and monitor seller performance' },
                customers: { title: 'Customer Management', subtitle: 'View and manage customer relationships' }
            };

            const pageInfo = titles[sectionName] || titles.dashboard;
            const titleEl = document.getElementById('page-title');
            const subtitleEl = document.getElementById('page-subtitle');
            
            if (titleEl) titleEl.textContent = pageInfo.title;
            if (subtitleEl) subtitleEl.textContent = pageInfo.subtitle;

            currentSection = sectionName;
            
            // Load section-specific data
            if (sectionName === 'products') {
                loadProductsData();
            }
        }

        // Test API Connection - Fixed version
        async function testAPIConnection() {
            const apiUrl = document.getElementById('apiBaseUrl')?.value?.trim();
            const statusDiv = document.getElementById('apiStatus');
            
            if (!apiUrl) {
                showApiStatus('Please enter an API base URL', 'error');
                return;
            }

            API_BASE = apiUrl.replace(/\/$/, '');
            showApiStatus('Testing connection...', 'loading');
            
            try {
                console.log('üîÑ Testing connection to backend...');
                
                const testEndpoints = [
                    `${API_BASE}/api/products`,
                    `${API_BASE}/products`,
                    `${API_BASE}/api/health`,
                    `${API_BASE}/health`,
                    `${API_BASE}`
                ];

                let connected = false;
                for (const endpoint of testEndpoints) {
                    try {
                        const response = await fetch(endpoint, { 
                            method: 'GET',
                            headers: { 'Accept': 'application/json' },
                            timeout: 5000
                        });
                        
                        if (response.ok || response.status === 404) {
                            console.log(`‚úÖ Connected to backend at: ${endpoint}`);
                            isAPIConnected = true;
                            connected = true;
                            showApiStatus('‚úÖ API connected successfully!', 'success');
                            await loadExistingProducts();
                            break;
                        }
                    } catch (error) {
                        console.log(`‚ùå Failed to connect to: ${endpoint}`);
                        continue;
                    }
                }

                if (!connected) {
                    throw new Error('Could not connect to any API endpoint');
                }
                
            } catch (error) {
                console.log(`‚ö†Ô∏è Backend connection failed: ${error.message}`);
                isAPIConnected = false;
                showApiStatus('‚ö†Ô∏è API connection failed. Using demo mode.', 'warning');
            }
        }

        // Show API status
        function showApiStatus(message, type) {
            const statusDiv = document.getElementById('apiStatus');
            if (!statusDiv) return;

            const colors = {
                success: 'text-green-600 bg-green-50 border-green-200',
                error: 'text-red-600 bg-red-50 border-red-200',
                warning: 'text-yellow-600 bg-yellow-50 border-yellow-200',
                loading: 'text-blue-600 bg-blue-50 border-blue-200'
            };

            statusDiv.className = `mt-3 p-3 rounded border ${colors[type] || colors.loading}`;
            statusDiv.innerHTML = type === 'loading' ? 
                `<i class="fas fa-spinner spinner mr-2"></i>${message}` : 
                message;
        }

        // Load existing products
        async function loadExistingProducts() {
            if (!isAPIConnected) {
                console.log('API not connected, skipping product load');
                return;
            }

            try {
                console.log('üì¶ Loading existing products from database...');
                
                const endpoints = [`${API_BASE}/api/products`, `${API_BASE}/products`];
                let response;
                
                for (const endpoint of endpoints) {
                    try {
                        response = await fetch(endpoint, { 
                            method: 'GET',
                            headers: { 'Accept': 'application/json' }
                        });
                        if (response.ok) break;
                    } catch (error) {
                        continue;
                    }
                }
                
                if (response && response.ok) {
                    const data = await response.json();
                    const existingProducts = data.data || data.products || data;
                    
                    if (Array.isArray(existingProducts)) {
                        dashboardData.productsList = existingProducts;
                        console.log(`‚úÖ Loaded ${existingProducts.length} existing products from database`);
                        updateProductsDisplay();
                    }
                }
            } catch (error) {
                console.log(`‚ö†Ô∏è Could not load existing products: ${error.message}`);
            }
        }

        // Handle product form submission - Fixed version
        async function handleProductSubmit(event) {
            event.preventDefault();
            
            const submitBtn = document.getElementById('submitProductBtn');
            const originalText = submitBtn.innerHTML;
            
            // Get form data
            const name = document.getElementById("prodName").value.trim();
            const price = parseFloat(document.getElementById("prodPrice").value);
            const image = document.getElementById("prodImage").value.trim();
            const description = document.getElementById("prodDesc").value.trim();
            const categoryName = document.getElementById("prodCat").value.trim();
            const discountPercentage = parseFloat(document.getElementById("prodDiscount").value) || 0;

            // Validation
            if (!name) {
                showNotification('Product name is required', 'error');
                return;
            }
            
            if (!price || price <= 0) {
                showNotification('Valid price is required', 'error');
                return;
            }

            // Show loading state
            submitBtn.innerHTML = '<i class="fas fa-spinner spinner"></i> Adding Product...';
            submitBtn.disabled = true;

            try {
                // Calculate final price with discount
                const finalPrice = discountPercentage > 0 ? price * (1 - discountPercentage / 100) : price;

                // Prepare payload
                const payload = {
                    name,
                    price,
                    finalPrice,
                    description: description || `Premium ${name} - High quality product available now!`,
                    images: image ? [{ url: image, alt: name }] : [],
                    category: categoryName ? { name: categoryName } : { name: 'General' },
                    discountPercentage,
                    isOnSale: discountPercentage > 0,
                    inStock: true,
                    stockQuantity: 100,
                    sku: `SKU-${Date.now()}`,
                    tags: categoryName ? [categoryName.toLowerCase()] : ['general'],
                    createdAt: new Date().toISOString()
                };

                console.log('üîÑ Adding product...', payload);

                if (isAPIConnected) {
                    // Try to add to real database
                    const endpoints = [`${API_BASE}/api/products`, `${API_BASE}/products`];
                    let success = false;
                    
                    for (const endpoint of endpoints) {
                        try {
                            const response = await fetch(endpoint, {
                                method: 'POST',
                                headers: {
                                    'Content-Type': 'application/json',
                                    'Accept': 'application/json'
                                },
                                body: JSON.stringify(payload)
                            });

                            if (response.ok) {
                                const data = await response.json();
                                console.log(`‚úÖ Product "${name}" added to database!`);
                                
                                // Add to local array
                                const newProduct = {
                                    id: data.data?.id || data.id || Date.now(),
                                    ...payload,
                                    ...(data.data || data)
                                };
                                
                                dashboardData.productsList.push(newProduct);
                                success = true;
                                break;
                            }
                        } catch (error) {
                            console.log(`Failed to add to ${endpoint}:`, error.message);
                            continue;
                        }
                    }
                    
                    if (!success) {
                        throw new Error('Failed to add to database');
                    }
                } else {
                    // Add to demo data
                    const mockProduct = {
                        id: Date.now(),
                        ...payload
                    };
                    
                    dashboardData.productsList.push(mockProduct);
                    console.log(`‚úÖ Product "${name}" added to demo data!`);
                }

                // Success actions
                clearProductForm();
                showSuccessAnimation(submitBtn);
                showNotification(`Product "${name}" added successfully!`, 'success');
                updateProductsDisplay();
                
            } catch (error) {
                console.log(`‚ùå Failed to add product: ${error.message}`);
                
                // Fallback: Add to local demo data
                const mockProduct = {
                    id: Date.now(),
                    name,
                    price,
                    finalPrice: discountPercentage > 0 ? price * (1 - discountPercentage / 100) : price,
                    description: description || `Premium ${name} - High quality product available now!`,
                    images: image ? [{ url: image, alt: name }] : [],
                    category: categoryName ? { name: categoryName } : { name: 'General' },
                    discountPercentage,
                    isOnSale: discountPercentage > 0,
                    inStock: true,
                    stockQuantity: 100
                };
                
                dashboardData.productsList.push(mockProduct);
                clearProductForm();
                showNotification(`Product "${name}" added to demo data!`, 'warning');
                updateProductsDisplay();
                
            } finally {
                // Reset button
                submitBtn.innerHTML = originalText;
                submitBtn.disabled = false;
            }
        }

        // Clear product form
        function clearProductForm() {
            const form = document.getElementById('realProductForm');
            if (form) {
                form.reset();
            }
        }

        // Show success animation
        function showSuccessAnimation(button) {
            const originalText = button.innerHTML;
            
            button.innerHTML = '<i class="fas fa-check"></i> Added Successfully!';
            button.style.background = 'linear-gradient(135deg, #27ae60 0%, #2ecc71 100%)';
            
            setTimeout(() => {
                button.innerHTML = originalText;
                button.style.background = '';
            }, 2000);
        }

        // Update products display
        function updateProductsDisplay() {
            const productsGrid = document.getElementById('productsGrid');
            const productCount = document.getElementById('productCount');
            
            if (!productsGrid) return;

            const products = dashboardData.productsList;
            
            if (productCount) {
                productCount.textContent = products.length;
            }
            
            if (products.length === 0) {
                productsGrid.innerHTML = `
                    <div class="col-span-full text-center text-gray-500 py-8">
                        <i class="fas fa-box-open text-4xl mb-4"></i>
                        <p>No products available. Add your first product!</p>
                    </div>
                `;
                return;
            }

            const productsHTML = products.map(product => `
                <div class="bg-white rounded-xl shadow-sm hover:shadow-md p-4 transition-all duration-300">
                    <div class="aspect-w-1 aspect-h-1 w-full overflow-hidden rounded-lg mb-4">
                        ${product.images && product.images[0] ? 
                            `<img src="${product.images[0].url}" alt="${product.name}" class="w-full h-48 object-cover" onerror="this.parentElement.innerHTML='<div class=\\'w-full h-48 bg-gray-200 flex items-center justify-center\\'><i class=\\'fas fa-image text-gray-400 text-4xl\\'></i></div>'">` :
                            `<div class="w-full h-48 bg-gray-200 flex items-center justify-center">
                                <i class="fas fa-image text-gray-400 text-4xl"></i>
                            </div>`
                        }
                    </div>
                    <h3 class="text-lg font-semibold text-gray-800 mb-2 line-clamp-2">${product.name}</h3>
                    <p class="text-gray-600 text-sm mb-3 line-clamp-3">${product.description?.substring(0, 100) || 'No description available'}${product.description?.length > 100 ? '...' : ''}</p>
                    <div class="flex items-center justify-between mb-2">
                        <div class="flex items-center space-x-2">
                            ${product.isOnSale ? 
                                `<span class="text-lg font-bold text-green-600">‚Çπ${product.finalPrice}</span>
                                 <span class="text-sm text-gray-500 line-through">‚Çπ${product.price}</span>` :
                                `<span class="text-lg font-bold text-gray-800">‚Çπ${product.price}</span>`
                            }
                        </div>
                        <span class="text-xs px-2 py-1 rounded-full ${product.inStock ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'}">
                            ${product.inStock ? 'In Stock' : 'Out of Stock'}
                        </span>
                    </div>
                    ${product.category ? 
                        `<div class="mb-2">
                            <span class="text-xs px-2 py-1 bg-blue-100 text-blue-800 rounded-full">${product.category.name}</span>
                        </div>` : ''
                    }
                    <div class="flex space-x-2 mt-3">
                        <button class="flex-1 bg-blue-600 text-white text-xs py-2 rounded hover:bg-blue-700 transition-colors" onclick="editProduct(${product.id})">
                            <i class="fas fa-edit mr-1"></i> Edit
                        </button>
                        <button class="flex-1 bg-red-600 text-white text-xs py-2 rounded hover:bg-red-700 transition-colors" onclick="deleteProduct(${product.id})">
                            <i class="fas fa-trash mr-1"></i> Delete
                        </button>
                    </div>
                </div>
            `).join('');

            productsGrid.innerHTML = productsHTML;
        }

        // Load products data
        function loadProductsData() {
            updateProductsDisplay();
            
            // Auto-test API connection when products section is loaded
            if (!isAPIConnected) {
                setTimeout(() => {
                    testAPIConnection();
                }, 500);
            }
        }

        // Show add product form
        function showAddProductForm() {
            const formSection = document.getElementById('productFormSection');
            if (formSection) {
                formSection.scrollIntoView({ behavior: 'smooth' });
                
                // Focus on first input
                setTimeout(() => {
                    const firstInput = document.getElementById('prodName');
                    if (firstInput) firstInput.focus();
                }, 500);
            }
        }

        // Refresh products
        function refreshProducts() {
            if (isAPIConnected) {
                loadExistingProducts();
            } else {
                updateProductsDisplay();
            }
            showNotification('Products refreshed!', 'success');
        }

        // Edit product (placeholder)
        function editProduct(productId) {
            showNotification('Edit product feature coming soon!', 'info');
        }

        // Delete product
        function deleteProduct(productId) {
            if (confirm('Are you sure you want to delete this product?')) {
                dashboardData.productsList = dashboardData.productsList.filter(p => p.id !== productId);
                updateProductsDisplay();
                showNotification('Product deleted successfully!', 'success');
            }
        }

        // Generate mock data
        function generateMockData() {
            dashboardData.sellers = [
                { id: 1, name: 'Fresh Foods Co.', email: 'contact@freshfoods.com', performance: 'excellent', products: 45, revenue: 125000, orders: 234, rating: 4.8, status: 'active', growth: 23.5 },
                { id: 2, name: 'Tech Gadgets Store', email: 'info@techgadgets.com', performance: 'good', products: 32, revenue: 98000, orders: 189, rating: 4.6, status: 'active', growth: 18.2 },
                { id: 3, name: 'Fashion Hub', email: 'hello@fashionhub.com', performance: 'average', products: 78, revenue: 67000, orders: 156, rating: 4.2, status: 'inactive', growth: 12.1 }
            ];

            dashboardData.ordersList = [];
            for (let i = 0; i < 50; i++) {
                const seller = dashboardData.sellers[Math.floor(Math.random() * dashboardData.sellers.length)];
                dashboardData.ordersList.push({
                    id: `QL${Date.now().toString().substr(-8)}${i}`,
                    customer: `Customer ${i + 1}`,
                    seller: seller.name,
                    items: Math.floor(Math.random() * 5) + 1,
                    total: Math.floor(Math.random() * 5000) + 500,
                    status: ['pending', 'processing', 'shipped', 'delivered', 'cancelled'][Math.floor(Math.random() * 5)],
                    date: new Date(Date.now() - Math.random() * 30 * 24 * 60 * 60 * 1000).toISOString().split('T')[0]
                });
            }

            // Generate sample products if none exist
            if (dashboardData.productsList.length === 0) {
                dashboardData.productsList = [
                    {
                        id: 1,
                        name: 'Premium Wireless Headphones',
                        price: 2999,
                        finalPrice: 2399,
                        description: 'High-quality wireless headphones with noise cancellation and premium sound quality',
                        images: [{ url: 'https://images.unsplash.com/photo-1505740420928-5e560c06d30e?w=300', alt: 'Headphones' }],
                        category: { name: 'Electronics' },
                        discountPercentage: 20,
                        isOnSale: true,
                        inStock: true,
                        stockQuantity: 50
                    },
                    {
                        id: 2,
                        name: 'Organic Green Tea',
                        price: 599,
                        finalPrice: 599,
                        description: 'Premium organic green tea leaves sourced from the finest gardens',
                        images: [{ url: 'https://images.unsplash.com/photo-1564890375318-8b2fe3133be9?w=300', alt: 'Green Tea' }],
                        category: { name: 'Groceries' },
                        discountPercentage: 0,
                        isOnSale: false,
                        inStock: true,
                        stockQuantity: 100
                    }
                ];
            }

            updateLiveOrders();
            updateTopSellers();
        }

        // Initialize charts
        function initializeCharts() {
            // Revenue Chart
            const revenueCtx = document.getElementById('revenueChart')?.getContext('2d');
            if (revenueCtx) {
                charts.revenueChart = new Chart(revenueCtx, {
                    type: 'line',
                    data: {
                        labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul'],
                        datasets: [{
                            label: 'Revenue',
                            data: [65000, 78000, 82000, 91000, 87000, 95000, 102000],
                            borderColor: '#667eea',
                            backgroundColor: 'rgba(102, 126, 234, 0.1)',
                            fill: true,
                            tension: 0.4
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: { display: false }
                        },
                        scales: {
                            y: {
                                beginAtZero: true,
                                ticks: {
                                    callback: function(value) {
                                        return '‚Çπ' + (value / 1000) + 'K';
                                    }
                                }
                            }
                        }
                    }
                });
            }

            // Category Chart
            const categoryCtx = document.getElementById('categoryChart')?.getContext('2d');
            if (categoryCtx) {
                charts.categoryChart = new Chart(categoryCtx, {
                    type: 'doughnut',
                    data: {
                        labels: ['Electronics', 'Fashion', 'Groceries', 'Home & Garden', 'Sports'],
                        datasets: [{
                            data: [35, 25, 20, 12, 8],
                            backgroundColor: ['#667eea', '#764ba2', '#f093fb', '#f5576c', '#4facfe']
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: { position: 'bottom' }
                        }
                    }
                });
            }
        }

        // Update dashboard stats
        function updateDashboardStats() {
            const elements = {
                totalRevenue: document.getElementById('totalRevenue'),
                totalOrders: document.getElementById('totalOrders'),
                totalCustomers: document.getElementById('totalCustomers'),
                totalProducts: document.getElementById('totalProducts')
            };

            if (elements.totalRevenue) elements.totalRevenue.textContent = `‚Çπ${dashboardData.revenue.toLocaleString()}`;
            if (elements.totalOrders) elements.totalOrders.textContent = dashboardData.orders.toLocaleString();
            if (elements.totalCustomers) elements.totalCustomers.textContent = dashboardData.customers.toLocaleString();
            if (elements.totalProducts) elements.totalProducts.textContent = dashboardData.products.toLocaleString();
        }

        // Update live orders
        function updateLiveOrders() {
            const liveOrders = [
                { id: 'QL12345', customer: 'Rahul Kumar', status: 'processing', time: '2 min ago', amount: 850 },
                { id: 'QL12346', customer: 'Priya Sharma', status: 'shipped', time: '5 min ago', amount: 1200 },
                { id: 'QL12347', customer: 'Amit Singh', status: 'delivered', time: '12 min ago', amount: 675 },
                { id: 'QL12348', customer: 'Sneha Patel', status: 'pending', time: '18 min ago', amount: 2100 }
            ];

            const liveOrdersList = document.getElementById('liveOrdersList');
            if (!liveOrdersList) return;

            const ordersHtml = liveOrders.map(order => `
                <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors">
                    <div>
                        <div class="font-semibold text-gray-800">${order.id}</div>
                        <div class="text-sm text-gray-600">${order.customer}</div>
                        <div class="text-xs text-gray-500">${order.time}</div>
                    </div>
                    <div class="text-right">
                        <div class="font-bold text-gray-800">‚Çπ${order.amount}</div>
                        <span class="text-xs px-2 py-1 rounded-full ${getStatusColor(order.status)}">
                            ${order.status}
                        </span>
                    </div>
                </div>
            `).join('');

            liveOrdersList.innerHTML = ordersHtml;
        }

        // Update top sellers
        function updateTopSellers() {
            const topSellers = dashboardData.sellers
                .sort((a, b) => b.revenue - a.revenue)
                .slice(0, 5);

            const topSellersList = document.getElementById('topSellersList');
            if (!topSellersList) return;

            const sellersHtml = topSellers.map((seller, index) => `
                <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors">
                    <div class="flex items-center">
                        <div class="w-8 h-8 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full flex items-center justify-center text-white font-bold text-sm mr-3">
                            ${index + 1}
                        </div>
                        <div>
                            <div class="font-semibold text-gray-800">${seller.name}</div>
                            <div class="text-sm text-gray-600">${seller.orders} orders</div>
                        </div>
                    </div>
                    <div class="text-right">
                        <div class="font-bold text-gray-800">‚Çπ${(seller.revenue / 1000).toFixed(0)}K</div>
                        <div class="flex items-center">
                            <span class="performance-indicator indicator-${seller.performance}"></span>
                            <span class="text-xs text-gray-600 capitalize">${seller.performance}</span>
                        </div>
                    </div>
                </div>
            `).join('');

            topSellersList.innerHTML = sellersHtml;
        }

        // Start real-time updates
        function startRealTimeUpdates() {
            setInterval(() => {
                updateLiveOrders();
            }, 30000);
        }

        // Get status color helper
        function getStatusColor(status) {
            const colors = {
                pending: 'bg-yellow-100 text-yellow-800',
                processing: 'bg-blue-100 text-blue-800',
                shipped: 'bg-purple-100 text-purple-800',
                delivered: 'bg-green-100 text-green-800',
                cancelled: 'bg-red-100 text-red-800'
            };
            return colors[status] || 'bg-gray-100 text-gray-800';
        }

        // Update revenue chart
        function updateRevenueChart(period) {
            if (charts.revenueChart) {
                const data = {
                    7: {
                        labels: ['Day 1', 'Day 2', 'Day 3', 'Day 4', 'Day 5', 'Day 6', 'Day 7'],
                        data: [12000, 15000, 11000, 18000, 16000, 20000, 17000]
                    },
                    30: {
                        labels: ['Week 1', 'Week 2', 'Week 3', 'Week 4'],
                        data: [65000, 78000, 82000, 91000]
                    },
                    90: {
                        labels: ['Month 1', 'Month 2', 'Month 3'],
                        data: [245000, 289000, 312000]
                    }
                };

                const selectedData = data[period];
                charts.revenueChart.data.labels = selectedData.labels;
                charts.revenueChart.data.datasets[0].data = selectedData.data;
                charts.revenueChart.update();
            }
        }

        // Refresh live orders
        function refreshLiveOrders() {
            updateLiveOrders();
            showNotification('Live orders refreshed!', 'success');
        }

        // Show notifications
        function showNotifications() {
            showNotification('You have 3 new notifications', 'info');
        }

        // Show notification toast
        function showNotification(message, type = 'success') {
            // Remove existing notifications
            document.querySelectorAll('.notification-toast').forEach(n => n.remove());

            // Create notification element
            const notification = document.createElement('div');
            notification.className = `notification-toast fixed top-4 right-4 z-[9999] max-w-sm bg-white shadow-lg rounded-lg p-4 border-l-4 transform transition-all duration-300 ${
                type === 'success' ? 'border-green-500' : 
                type === 'error' ? 'border-red-500' : 
                type === 'warning' ? 'border-yellow-500' : 
                type === 'info' ? 'border-blue-500' : 'border-gray-500'
            }`;
            
            notification.innerHTML = `
                <div class="flex items-center">
                    <div class="flex-shrink-0">
                        <i class="fas ${
                            type === 'success' ? 'fa-check-circle text-green-500' : 
                            type === 'error' ? 'fa-times-circle text-red-500' : 
                            type === 'warning' ? 'fa-exclamation-triangle text-yellow-500' : 
                            type === 'info' ? 'fa-info-circle text-blue-500' : 'fa-bell text-gray-500'
                        }"></i>
                    </div>
                    <div class="ml-3 flex-1">
                        <p class="text-sm font-medium text-gray-900">${message}</p>
                    </div>
                    <div class="ml-4 flex-shrink-0">
                        <button class="text-gray-400 hover:text-gray-600 transition-colors" onclick="this.parentElement.parentElement.parentElement.remove()">
                            <i class="fas fa-times text-sm"></i>
                        </button>
                    </div>
                </div>
            `;

            // Add to document
            document.body.appendChild(notification);
            
            // Animate in
            setTimeout(() => {
                notification.style.transform = 'translateX(0)';
                notification.style.opacity = '1';
            }, 100);
            
            // Auto remove after 4 seconds
            setTimeout(() => {
                if (notification.parentElement) {
                    notification.style.transform = 'translateX(100%)';
                    notification.style.opacity = '0';
                    setTimeout(() => notification.remove(), 300);
                }
            }, 4000);
        }

        // Enhanced search
        function handleSearch(query) {
            if (query.trim().length === 0) return;
            
            console.log('Searching for:', query);
            showNotification(`Searching for "${query}"...`, 'info');
            
            // Here you would implement actual search functionality
            // For now, just show a demo message
            setTimeout(() => {
                showNotification(`Found results for "${query}"`, 'success');
            }, 1000);
        }

        // Debounce helper function
        function debounce(func, wait) {
            let timeout;
            return function executedFunction(...args) {
                const later = () => {
                    clearTimeout(timeout);
                    func(...args);
                };
                clearTimeout(timeout);
                timeout = setTimeout(later, wait);
            };
        }

        // Utility functions
        function formatCurrency(amount) {
            return new Intl.NumberFormat('en-IN', {
                style: 'currency',
                currency: 'INR'
            }).format(amount);
        }

        function formatNumber(num) {
            return new Intl.NumberFormat('en-IN').format(num);
        }

        // Initialize everything when DOM is ready
        console.log('QuickLocal Admin Dashboard script loaded successfully! üöÄ');
    </script>

    <style>
        /* Additional styles for better UX */
        .notification-toast {
            opacity: 0;
            transform: translateX(100%);
        }
        
        .line-clamp-2 {
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }
        
        .line-clamp-3 {
            display: -webkit-box;
            -webkit-line-clamp: 3;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        /* Loading animation */
        .spinner {
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        /* Focus styles for better accessibility */
        input:focus, textarea:focus, select:focus, button:focus {
            outline: 2px solid #3b82f6;
            outline-offset: 2px;
        }

        /* Mobile responsive improvements */
        @media (max-width: 640px) {
            .ml-64 {
                margin-left: 0;
            }
            
            .fixed.inset-y-0.left-0.w-64 {
                transform: translateX(-100%);
                transition: transform 0.3s ease-in-out;
            }
            
            .notification-toast {
                max-width: calc(100vw - 2rem);
                right: 1rem;
                left: 1rem;
            }
        }

        /* Improved button hover effects */
        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none !important;
        }

        .btn:disabled:hover {
            transform: none !important;
            box-shadow: none !important;
        }
    </style>
</body>
</html>